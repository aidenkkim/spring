<%--
  Created by IntelliJ IDEA.
  User: aiden
  Date: 17. 9. 5
  Time: 오전 11:59
  To change this template use File | Settings | File Templates.
--%>
<%@taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>

<html>
<c:import url="../header.jsp"/>

<body>

<!-- Wrapper -->
<div id="wrapper">
    <c:import url="../menu.jsp"/>

        <!-- Main -->
        <div id="main" class="alt">

            <!-- One -->
            <section id="one">
                <div class="inner">
                    <header class="major">
                        <h1>Install Environment</h1>
                    </header>
                    <span class="image main"><img src="<c:url value="/resource/images/bigdata/big_03_02_elastic.png"/>" alt="" /></span>


                    <p>
                    <h2>Hardware Environment</h2>
                    CPU : i5-4460<br/>
                    GPU : GTX-1060 6GB<br/>
                    RAM : 16GB<br/>
                    SSD : 256GB<br/>
                    HDD : 1TB<br/>

                    <hr>

                    <!--Prepare the OS-->
                    <header class="major">
                        <h1>Step1. Prepare the OS</h1>
                    </header>
                    <p>
                        <div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px; border-right:2px solid #4f4f4f"><div style="margin:0; padding:0; word-break:normal; text-align:right; color:#aaa; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="line-height:130%">1</div><div style="line-height:130%">2</div><div style="line-height:130%">3</div><div style="line-height:130%">4</div><div style="line-height:130%">5</div><div style="line-height:130%">6</div><div style="line-height:130%">7</div><div style="line-height:130%">8</div><div style="line-height:130%">9</div><div style="line-height:130%">10</div><div style="line-height:130%">11</div></div></td><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Disable&nbsp;the&nbsp;SELINUX</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">vim&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>etc<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>sysconfig<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>selinux</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Change&nbsp;the&nbsp;configure</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">SELINUX<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>disabled</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#exit</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#reboot&nbsp;the&nbsp;server</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">reboot</div><div style="padding:0 6px; white-space:pre; line-height:130%">getenforce</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div></div></td><td style="vertical-align:bottom; padding:0 2px 4px 0"><a href="http://colorscripter.com/info#e" target="_blank" style="text-decoration:none; color:white"><span style="font-size:9px; word-break:normal; background-color:#4f4f4f; color:white; border-radius:10px; padding:1px">cs</span></a></td></tr></table></div>
                    </p>
                    <hr>



                    <!--Install JAVA-->
                    <p>
                        <h2>Step2. Install JAVA</h2>
                    <div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px; border-right:2px solid #4f4f4f"><div style="margin:0; padding:0; word-break:normal; text-align:right; color:#aaa; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="line-height:130%">1</div><div style="line-height:130%">2</div><div style="line-height:130%">3</div><div style="line-height:130%">4</div><div style="line-height:130%">5</div><div style="line-height:130%">6</div><div style="line-height:130%">7</div><div style="line-height:130%">8</div><div style="line-height:130%">9</div><div style="line-height:130%">10</div><div style="line-height:130%">11</div><div style="line-height:130%">12</div><div style="line-height:130%">13</div><div style="line-height:130%">14</div><div style="line-height:130%">15</div><div style="line-height:130%">16</div><div style="line-height:130%">17</div><div style="line-height:130%">18</div><div style="line-height:130%">19</div><div style="line-height:130%">20</div><div style="line-height:130%">21</div><div style="line-height:130%">22</div><div style="line-height:130%">23</div><div style="line-height:130%">24</div><div style="line-height:130%">25</div><div style="line-height:130%">26</div><div style="line-height:130%">27</div><div style="line-height:130%">28</div><div style="line-height:130%">29</div><div style="line-height:130%">30</div><div style="line-height:130%">31</div><div style="line-height:130%">32</div><div style="line-height:130%">33</div><div style="line-height:130%">34</div><div style="line-height:130%">35</div><div style="line-height:130%">36</div><div style="line-height:130%">37</div><div style="line-height:130%">38</div></div></td><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Directory&nbsp;move</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">cd&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>opt<span style="color:#0086b3"></span><span style="color:#ff3399">/</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Download</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">wget&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">-</span><span style="color:#0086b3"></span><span style="color:#ff3399">-</span>no<span style="color:#0086b3"></span><span style="color:#ff3399">-</span>cookies&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">-</span><span style="color:#0086b3"></span><span style="color:#ff3399">-</span>no<span style="color:#0086b3"></span><span style="color:#ff3399">-</span>check<span style="color:#0086b3"></span><span style="color:#ff3399">-</span>certificate&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">-</span><span style="color:#0086b3"></span><span style="color:#ff3399">-</span>header&nbsp;<span style="color:#ffd500">"Cookie:&nbsp;gpw_e24=http%3A%2F%2Fwww.oracle.com%2F;&nbsp;oraclelicense=accept-securebackup-cookie"</span>&nbsp;<span style="color:#ffd500">"http://download.oracle.com/otn-pub/java/jdk/8u141-b15/336fa29ff2bb4ef291e347e091f7f4a7/jdk-8u141-linux-x64.tar.gz"</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Decompress</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">tar&nbsp;xzf&nbsp;jdk<span style="color:#0086b3"></span><span style="color:#ff3399">-</span>8u141<span style="color:#0086b3"></span><span style="color:#ff3399">-</span>linux<span style="color:#0086b3"></span><span style="color:#ff3399">-</span>x64.tar.gz</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Directory&nbsp;move</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">cd&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>opt<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>jdk1.<span style="color:#c10aff">8.</span>0_141<span style="color:#0086b3"></span><span style="color:#ff3399">/</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#alternative&nbsp;can&nbsp;choose&nbsp;java&nbsp;version&nbsp;if&nbsp;there&nbsp;are&nbsp;several&nbsp;java&nbsp;version</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">alternatives&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">-</span><span style="color:#0086b3"></span><span style="color:#ff3399">-</span>install&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>usr<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>bin<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>java&nbsp;java&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>opt<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>jdk1.<span style="color:#c10aff">8.</span>0_141<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>bin<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>java&nbsp;<span style="color:#c10aff">2</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">alternatives&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">-</span><span style="color:#0086b3"></span><span style="color:#ff3399">-</span>config&nbsp;java</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#&nbsp;Selection&nbsp;&nbsp;&nbsp;&nbsp;Command</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#-----------------------------------------------</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/opt/jdk1.7.0_71/bin/java</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#&nbsp;&nbsp;2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/opt/jdk1.8.0_45/bin/java</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#&nbsp;&nbsp;3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/opt/jdk1.8.0_91/bin/java</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#&nbsp;&nbsp;4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/opt/jdk1.8.0_141/bin/java</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#&nbsp;Enter&nbsp;to&nbsp;keep&nbsp;the&nbsp;current&nbsp;selection[+],&nbsp;or&nbsp;type&nbsp;selection&nbsp;number:&nbsp;4</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#&nbsp;select&nbsp;/opt/jdk~~_141/java</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#alternative&nbsp;can&nbsp;choose&nbsp;java&nbsp;version&nbsp;if&nbsp;there&nbsp;are&nbsp;several&nbsp;java&nbsp;version</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">alternatives&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">-</span><span style="color:#0086b3"></span><span style="color:#ff3399">-</span>install&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>usr<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>bin<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>jar&nbsp;jar&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>opt<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>jdk1.<span style="color:#c10aff">8.</span>0_141<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>bin<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>jar&nbsp;<span style="color:#c10aff">2</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">alternatives&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">-</span><span style="color:#0086b3"></span><span style="color:#ff3399">-</span>install&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>usr<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>bin<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>javac&nbsp;javac&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>opt<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>jdk1.<span style="color:#c10aff">8.</span>0_141<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>bin<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>javac&nbsp;<span style="color:#c10aff">2</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">alternatives&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">-</span><span style="color:#0086b3"></span><span style="color:#ff3399">-</span><span style="color:#4be6fa">set</span>&nbsp;jar&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>opt<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>jdk1.<span style="color:#c10aff">8.</span>0_141<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>bin<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>jar</div><div style="padding:0 6px; white-space:pre; line-height:130%">alternatives&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">-</span><span style="color:#0086b3"></span><span style="color:#ff3399">-</span><span style="color:#4be6fa">set</span>&nbsp;javac&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>opt<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>jdk1.<span style="color:#c10aff">8.</span>0_141<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>bin<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>javac</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div></div><div style="text-align:right; margin-top:-13px; margin-right:5px; font-size:9px; font-style:italic"><a href="http://colorscripter.com/info#e" target="_blank" style="color:#4f4f4f; text-decoration:none">Colored by Color Scripter</a></div></td><td style="vertical-align:bottom; padding:0 2px 4px 0"><a href="http://colorscripter.com/info#e" target="_blank" style="text-decoration:none; color:white"><span style="font-size:9px; word-break:normal; background-color:#4f4f4f; color:white; border-radius:10px; padding:1px">cs</span></a></td></tr></table></div>
                    </p>

                    <hr>

                    <!--Install Elasticsearch-->
                    <p>
                    <h2>Step3. Install and Configure Elasticsearch</h2>
                    In this step, we will install and configure Elasticsearch. I will install Elasticsearch from an rpm package provided by elastic.co and configure it to run on localhost (to make the setup secure and ensure that it is not reachable from the outside).
                    <div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px; border-right:2px solid #4f4f4f"><div style="margin:0; padding:0; word-break:normal; text-align:right; color:#aaa; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="line-height:130%">1</div><div style="line-height:130%">2</div><div style="line-height:130%">3</div><div style="line-height:130%">4</div><div style="line-height:130%">5</div><div style="line-height:130%">6</div><div style="line-height:130%">7</div><div style="line-height:130%">8</div><div style="line-height:130%">9</div><div style="line-height:130%">10</div><div style="line-height:130%">11</div><div style="line-height:130%">12</div><div style="line-height:130%">13</div><div style="line-height:130%">14</div><div style="line-height:130%">15</div><div style="line-height:130%">16</div><div style="line-height:130%">17</div><div style="line-height:130%">18</div><div style="line-height:130%">19</div><div style="line-height:130%">20</div><div style="line-height:130%">21</div><div style="line-height:130%">22</div><div style="line-height:130%">23</div><div style="line-height:130%">24</div><div style="line-height:130%">25</div><div style="line-height:130%">26</div><div style="line-height:130%">27</div><div style="line-height:130%">28</div><div style="line-height:130%">29</div><div style="line-height:130%">30</div><div style="line-height:130%">31</div><div style="line-height:130%">32</div><div style="line-height:130%">33</div><div style="line-height:130%">34</div><div style="line-height:130%">35</div><div style="line-height:130%">36</div><div style="line-height:130%">37</div><div style="line-height:130%">38</div><div style="line-height:130%">39</div><div style="line-height:130%">40</div><div style="line-height:130%">41</div></div></td><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Before&nbsp;installing&nbsp;Elasticsearch,&nbsp;add&nbsp;the&nbsp;elastic.co&nbsp;key&nbsp;to&nbsp;the&nbsp;server.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">rpm&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">-</span><span style="color:#0086b3"></span><span style="color:#ff3399">-</span>import&nbsp;https:<span style="color:#0086b3"></span><span style="color:#ff3399">/</span><span style="color:#0086b3"></span><span style="color:#ff3399">/</span>artifacts.elastic.co<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>GPG<span style="color:#0086b3"></span><span style="color:#ff3399">-</span>KEY<span style="color:#0086b3"></span><span style="color:#ff3399">-</span>elasticsearch</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Download&nbsp;elasticsearch&nbsp;5.1&nbsp;with&nbsp;wget&nbsp;and&nbsp;then&nbsp;install&nbsp;it</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">wget&nbsp;https:<span style="color:#0086b3"></span><span style="color:#ff3399">/</span><span style="color:#0086b3"></span><span style="color:#ff3399">/</span>artifacts.elastic.co<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>downloads<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>elasticsearch<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>elasticsearch<span style="color:#0086b3"></span><span style="color:#ff3399">-</span><span style="color:#c10aff">5.</span><span style="color:#c10aff">1.</span><span style="color:#c10aff">1.</span>rpm</div><div style="padding:0 6px; white-space:pre; line-height:130%">rpm&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">-</span>ivh&nbsp;elasticsearch<span style="color:#0086b3"></span><span style="color:#ff3399">-</span><span style="color:#c10aff">5.</span><span style="color:#c10aff">1.</span><span style="color:#c10aff">1.</span>rpm</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Elasticsearch&nbsp;is&nbsp;installed.&nbsp;Now&nbsp;go&nbsp;to&nbsp;the&nbsp;configuration&nbsp;directory&nbsp;and&nbsp;edit&nbsp;the&nbsp;elasticsaerch.yml&nbsp;configuration&nbsp;file.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">cd&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>etc<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>elasticsearch<span style="color:#0086b3"></span><span style="color:#ff3399">/</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">vim&nbsp;elasticsearch.yml</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Enable&nbsp;memory&nbsp;lock&nbsp;for&nbsp;Elasticsearch&nbsp;by&nbsp;removing&nbsp;a&nbsp;comment&nbsp;on&nbsp;line&nbsp;40.&nbsp;This&nbsp;disables&nbsp;memory&nbsp;swapping&nbsp;for&nbsp;Elasticsearch.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">bootstrap.memory_lock:&nbsp;<span style="color:#c10aff">true</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#In&nbsp;the&nbsp;'Network'&nbsp;block,&nbsp;uncomment&nbsp;the&nbsp;network.host&nbsp;and&nbsp;http.port&nbsp;lines.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#You&nbsp;can&nbsp;configure&nbsp;the&nbsp;port(9200)</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">network.host:&nbsp;localhost</div><div style="padding:0 6px; white-space:pre; line-height:130%">http.port:&nbsp;<span style="color:#c10aff">9200</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Save&nbsp;&amp;&nbsp;Exit</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Edit&nbsp;the&nbsp;elasticsearch.service&nbsp;file&nbsp;for&nbsp;the&nbsp;memory&nbsp;lock&nbsp;configuration.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">vim&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>usr<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>lib<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>systemd<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>system<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>elasticsearch.service</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Uncomment&nbsp;LimitMEMLOCK&nbsp;line.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">LimitMEMLOCK<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>infinity</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Save&nbsp;&amp;&nbsp;Exit</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Edit&nbsp;the&nbsp;sysconfig&nbsp;configuration&nbsp;file&nbsp;for&nbsp;Elasticsearch.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">vim&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>etc<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>sysconfig<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>elasticsearch</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Uncomment&nbsp;line&nbsp;60&nbsp;and&nbsp;make&nbsp;sure&nbsp;the&nbsp;value&nbsp;is&nbsp;'unlimited'.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">MAX_LOCKED_MEMORY<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>unlimited</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Save&nbsp;&amp;&nbsp;Exit</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#The&nbsp;Elasticsearch&nbsp;configuration&nbsp;is&nbsp;finished.&nbsp;Elasticsearch&nbsp;will&nbsp;run&nbsp;on&nbsp;the&nbsp;localhost&nbsp;IP&nbsp;address&nbsp;on&nbsp;port&nbsp;9200,</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#we&nbsp;disabled&nbsp;memory&nbsp;swapping&nbsp;for&nbsp;it&nbsp;by&nbsp;enabling&nbsp;mlockall&nbsp;on&nbsp;the&nbsp;CentOS&nbsp;server.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Reload&nbsp;systemd,&nbsp;Enable&nbsp;to&nbsp;start&nbsp;at&nbsp;boot&nbsp;time</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">sudo&nbsp;systemctl&nbsp;daemon<span style="color:#0086b3"></span><span style="color:#ff3399">-</span>reload</div><div style="padding:0 6px; white-space:pre; line-height:130%">sudo&nbsp;systemctl&nbsp;enable&nbsp;elasticsearch</div><div style="padding:0 6px; white-space:pre; line-height:130%">sudo&nbsp;systemctl&nbsp;start&nbsp;elasticsearch</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Wait&nbsp;a&nbsp;second&nbsp;for&nbsp;Eelasticsearch&nbsp;to&nbsp;start,&nbsp;then&nbsp;check&nbsp;the&nbsp;open&nbsp;ports&nbsp;on&nbsp;the&nbsp;server,&nbsp;make&nbsp;sure&nbsp;'state'&nbsp;for&nbsp;port&nbsp;9200&nbsp;is&nbsp;'LISTEN'.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">netstat&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">-</span>plntu</div></div><div style="text-align:right; margin-top:-13px; margin-right:5px; font-size:9px; font-style:italic"><a href="http://colorscripter.com/info#e" target="_blank" style="color:#4f4f4f; text-decoration:none">Colored by Color Scripter</a></div></td><td style="vertical-align:bottom; padding:0 2px 4px 0"><a href="http://colorscripter.com/info#e" target="_blank" style="text-decoration:none; color:white"><span style="font-size:9px; word-break:normal; background-color:#4f4f4f; color:white; border-radius:10px; padding:1px">cs</span></a></td></tr></table></div>
                    <span class="image main"><img src="<c:url value="/resource/images/bigdata/big_03_03_elastic.png"/>" alt="" /></span>

                    <div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px; border-right:2px solid #4f4f4f"><div style="margin:0; padding:0; word-break:normal; text-align:right; color:#aaa; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="line-height:130%">1</div><div style="line-height:130%">2</div><div style="line-height:130%">3</div></div></td><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Check&nbsp;the&nbsp;memory&nbsp;lock&nbsp;to&nbsp;ensure&nbsp;that&nbsp;mlockall&nbsp;is&nbsp;enabled,&nbsp;and&nbsp;check&nbsp;that&nbsp;Elasticsearch&nbsp;is&nbsp;running.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">curl&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">-</span>XGET&nbsp;<span style="color:#ffd500">'localhost:9200/_nodes?filter_path=**.mlockall&amp;pretty'</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">curl&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">-</span>XGET&nbsp;<span style="color:#ffd500">'localhost:9200/?pretty'</span></div></div><div style="text-align:right; margin-top:-13px; margin-right:5px; font-size:9px; font-style:italic"><a href="http://colorscripter.com/info#e" target="_blank" style="color:#4f4f4f; text-decoration:none">Colored by Color Scripter</a></div></td><td style="vertical-align:bottom; padding:0 2px 4px 0"><a href="http://colorscripter.com/info#e" target="_blank" style="text-decoration:none; color:white"><span style="font-size:9px; word-break:normal; background-color:#4f4f4f; color:white; border-radius:10px; padding:1px">cs</span></a></td></tr></table></div>
                    <span class="image main"><img src="<c:url value="/resource/images/bigdata/big_03_04_elastic.png"/>" alt="" /></span>
                    </p>

                    <hr>


                    <!--Install Kibana-->
                    <p>
                    <h2>Step4. Install and Configure Kibana with Nginx</h2>
                    In this step, we will install and configure Kibana with a Nginx web server. Kibana will listen on the localhost IP address and Nginx acts as a reverse proxy for the Kibana application.
                    <div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px; border-right:2px solid #4f4f4f"><div style="margin:0; padding:0; word-break:normal; text-align:right; color:#aaa; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="line-height:130%">1</div><div style="line-height:130%">2</div><div style="line-height:130%">3</div><div style="line-height:130%">4</div><div style="line-height:130%">5</div><div style="line-height:130%">6</div><div style="line-height:130%">7</div><div style="line-height:130%">8</div><div style="line-height:130%">9</div><div style="line-height:130%">10</div><div style="line-height:130%">11</div><div style="line-height:130%">12</div><div style="line-height:130%">13</div><div style="line-height:130%">14</div><div style="line-height:130%">15</div><div style="line-height:130%">16</div><div style="line-height:130%">17</div><div style="line-height:130%">18</div></div></td><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Download&nbsp;Kibana&nbsp;5.1&nbsp;with&nbsp;wget,&nbsp;then&nbsp;install&nbsp;it&nbsp;with&nbsp;the&nbsp;rpm&nbsp;command</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">wget&nbsp;https:<span style="color:#0086b3"></span><span style="color:#ff3399">/</span><span style="color:#0086b3"></span><span style="color:#ff3399">/</span>artifacts.elastic.co<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>downloads<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>kibana<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>kibana<span style="color:#0086b3"></span><span style="color:#ff3399">-</span><span style="color:#c10aff">5.</span><span style="color:#c10aff">1.</span><span style="color:#c10aff">1</span><span style="color:#ff3399">-</span>x86_64.rpm</div><div style="padding:0 6px; white-space:pre; line-height:130%">rpm&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">-</span>ivh&nbsp;kibana<span style="color:#0086b3"></span><span style="color:#ff3399">-</span><span style="color:#c10aff">5.</span><span style="color:#c10aff">1.</span><span style="color:#c10aff">1</span><span style="color:#ff3399">-</span>x86_64.rpm</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Edit&nbsp;the&nbsp;Kibana&nbsp;configuration&nbsp;file.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">vim&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>etc<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>kibana<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>kibana.yml</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Uncomment&nbsp;the&nbsp;configuration&nbsp;lines&nbsp;for&nbsp;server.port,&nbsp;server.host&nbsp;and&nbsp;elasticsearch.url.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">server.port:&nbsp;<span style="color:#c10aff">5601</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">server.host:&nbsp;<span style="color:#ffd500">"localhost"</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">elasticsearch.url:&nbsp;<span style="color:#ffd500">"http://localhost:9200"</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Save&nbsp;and&nbsp;Exit.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Add&nbsp;Kibana&nbsp;to&nbsp;run&nbsp;at&nbsp;boot&nbsp;and&nbsp;start&nbsp;it.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">sudo&nbsp;systemctl&nbsp;enable&nbsp;kibana</div><div style="padding:0 6px; white-space:pre; line-height:130%">sudo&nbsp;systemctl&nbsp;start&nbsp;kibana</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Kibana&nbsp;will&nbsp;run&nbsp;on&nbsp;port&nbsp;5601&nbsp;as&nbsp;node&nbsp;application.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">netstat&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">-</span>plntu</div></div><div style="text-align:right; margin-top:-13px; margin-right:5px; font-size:9px; font-style:italic"><a href="http://colorscripter.com/info#e" target="_blank" style="color:#4f4f4f; text-decoration:none">Colored by Color Scripter</a></div></td><td style="vertical-align:bottom; padding:0 2px 4px 0"><a href="http://colorscripter.com/info#e" target="_blank" style="text-decoration:none; color:white"><span style="font-size:9px; word-break:normal; background-color:#4f4f4f; color:white; border-radius:10px; padding:1px">cs</span></a></td></tr></table></div> <span class="image main"><img src="<c:url value="/resource/images/bigdata/big_03_04_elastic.png"/>" alt="" /></span>
                    <span class="image main"><img src="<c:url value="/resource/images/bigdata/big_03_05_elastic.png"/>" alt="" /></span>

                    The Kibana installation is finished. Now we need to install Nginx and configure it as reverse proxy to be able to access Kibana from the public IP address.
                    <div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px; border-right:2px solid #4f4f4f"><div style="margin:0; padding:0; word-break:normal; text-align:right; color:#aaa; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="line-height:130%">1</div><div style="line-height:130%">2</div><div style="line-height:130%">3</div><div style="line-height:130%">4</div><div style="line-height:130%">5</div><div style="line-height:130%">6</div><div style="line-height:130%">7</div><div style="line-height:130%">8</div><div style="line-height:130%">9</div><div style="line-height:130%">10</div><div style="line-height:130%">11</div></div></td><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Nginx&nbsp;is&nbsp;available&nbsp;in&nbsp;the&nbsp;Epel&nbsp;repository,&nbsp;install&nbsp;epel-release&nbsp;with&nbsp;yum.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">yum&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">-</span>y&nbsp;install&nbsp;epel<span style="color:#0086b3"></span><span style="color:#ff3399">-</span>release</div><div style="padding:0 6px; white-space:pre; line-height:130%">yum&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">-</span>y&nbsp;install&nbsp;nginx&nbsp;httpd<span style="color:#0086b3"></span><span style="color:#ff3399">-</span>tools</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#The&nbsp;httpd-tools&nbsp;package&nbsp;contains&nbsp;tools&nbsp;for&nbsp;the&nbsp;web&nbsp;server,&nbsp;we&nbsp;will&nbsp;use&nbsp;htpasswd&nbsp;basic&nbsp;authentication&nbsp;for&nbsp;Kibana.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Edit&nbsp;the&nbsp;Nginx&nbsp;configuration&nbsp;file&nbsp;and&nbsp;remove&nbsp;the&nbsp;'server&nbsp;{&nbsp;}'&nbsp;block,&nbsp;so&nbsp;we&nbsp;can&nbsp;add&nbsp;a&nbsp;new&nbsp;virtual&nbsp;host&nbsp;configuration.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">cd&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>etc<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>nginx<span style="color:#0086b3"></span><span style="color:#ff3399">/</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">vim&nbsp;nginx.conf</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Remove&nbsp;the&nbsp;server&nbsp;{&nbsp;}&nbsp;block.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div></div><div style="text-align:right; margin-top:-13px; margin-right:5px; font-size:9px; font-style:italic"><a href="http://colorscripter.com/info#e" target="_blank" style="color:#4f4f4f; text-decoration:none">Colored by Color Scripter</a></div></td><td style="vertical-align:bottom; padding:0 2px 4px 0"><a href="http://colorscripter.com/info#e" target="_blank" style="text-decoration:none; color:white"><span style="font-size:9px; word-break:normal; background-color:#4f4f4f; color:white; border-radius:10px; padding:1px">cs</span></a></td></tr></table></div>
                    <span class="image main"><img src="<c:url value="/resource/images/bigdata/big_03_06_elastic.png"/>" alt="" /></span>
                    <div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px; border-right:2px solid #4f4f4f"><div style="margin:0; padding:0; word-break:normal; text-align:right; color:#aaa; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="line-height:130%">1</div><div style="line-height:130%">2</div><div style="line-height:130%">3</div><div style="line-height:130%">4</div><div style="line-height:130%">5</div><div style="line-height:130%">6</div><div style="line-height:130%">7</div><div style="line-height:130%">8</div><div style="line-height:130%">9</div><div style="line-height:130%">10</div><div style="line-height:130%">11</div><div style="line-height:130%">12</div><div style="line-height:130%">13</div><div style="line-height:130%">14</div><div style="line-height:130%">15</div><div style="line-height:130%">16</div><div style="line-height:130%">17</div><div style="line-height:130%">18</div><div style="line-height:130%">19</div><div style="line-height:130%">20</div><div style="line-height:130%">21</div><div style="line-height:130%">22</div><div style="line-height:130%">23</div><div style="line-height:130%">24</div><div style="line-height:130%">25</div><div style="line-height:130%">26</div><div style="line-height:130%">27</div><div style="line-height:130%">28</div><div style="line-height:130%">29</div><div style="line-height:130%">30</div></div></td><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Now&nbsp;we&nbsp;need&nbsp;to&nbsp;create&nbsp;a&nbsp;new&nbsp;virtual&nbsp;host&nbsp;configuration&nbsp;file&nbsp;in&nbsp;the&nbsp;conf.d&nbsp;directory.&nbsp;Create&nbsp;the&nbsp;new&nbsp;file&nbsp;'kibana.conf'&nbsp;with&nbsp;vim.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">vim&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>etc<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>nginx<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>conf.d<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>kibana.conf</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Paste&nbsp;the&nbsp;configuration&nbsp;below.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">server&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;listen&nbsp;<span style="color:#c10aff">80</span>;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;server_name&nbsp;elk<span style="color:#0086b3"></span><span style="color:#ff3399">-</span>stack.co;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;auth_basic&nbsp;<span style="color:#ffd500">"Restricted&nbsp;Access"</span>;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;auth_basic_user_file&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>etc<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>nginx<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>.kibana<span style="color:#0086b3"></span><span style="color:#ff3399">-</span>user;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;location&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proxy_pass&nbsp;http:<span style="color:#0086b3"></span><span style="color:#ff3399">/</span><span style="color:#0086b3"></span><span style="color:#ff3399">/</span>localhost:<span style="color:#c10aff">5601</span>;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proxy_http_version&nbsp;<span style="color:#c10aff">1.</span><span style="color:#c10aff">1</span>;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proxy_set_header&nbsp;Upgrade&nbsp;$http_upgrade;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proxy_set_header&nbsp;Connection&nbsp;<span style="color:#ffd500">'upgrade'</span>;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proxy_set_header&nbsp;Host&nbsp;$host;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proxy_cache_bypass&nbsp;$http_upgrade;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="padding:0 6px; white-space:pre; line-height:130%">}</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Save&nbsp;and&nbsp;exit.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Then&nbsp;create&nbsp;a&nbsp;new&nbsp;basic&nbsp;authentication&nbsp;file&nbsp;with&nbsp;the&nbsp;htpasswd&nbsp;command.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">sudo&nbsp;htpasswd&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">-</span>c&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>etc<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>nginx<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>.kibana<span style="color:#0086b3"></span><span style="color:#ff3399">-</span>user&nbsp;admin</div><div style="padding:0 6px; white-space:pre; line-height:130%">TYPE&nbsp;YOUR&nbsp;PASSWORD</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Test&nbsp;the&nbsp;Nginx&nbsp;configuration&nbsp;and&nbsp;make&nbsp;sure&nbsp;there&nbsp;is&nbsp;no&nbsp;error.&nbsp;Then&nbsp;add&nbsp;Nginx&nbsp;to&nbsp;run&nbsp;at&nbsp;the&nbsp;boot&nbsp;time&nbsp;and&nbsp;start&nbsp;Nginx.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">nginx&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">-</span>t</div><div style="padding:0 6px; white-space:pre; line-height:130%">systemctl&nbsp;enable&nbsp;nginx</div><div style="padding:0 6px; white-space:pre; line-height:130%">systemctl&nbsp;start&nbsp;nginx</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div></div><div style="text-align:right; margin-top:-13px; margin-right:5px; font-size:9px; font-style:italic"><a href="http://colorscripter.com/info#e" target="_blank" style="color:#4f4f4f; text-decoration:none">Colored by Color Scripter</a></div></td><td style="vertical-align:bottom; padding:0 2px 4px 0"><a href="http://colorscripter.com/info#e" target="_blank" style="text-decoration:none; color:white"><span style="font-size:9px; word-break:normal; background-color:#4f4f4f; color:white; border-radius:10px; padding:1px">cs</span></a></td></tr></table></div>
                    <span class="image main"><img src="<c:url value="/resource/images/bigdata/big_03_07_elastic.png"/>" alt="" /></span>

                    </p>
                    <hr>

                    <!--Install Logstash-->
                    <p>
                    <h2>Step5. Install and Configure Logstash(Master Node)</h2>
                    In this step, we will install Logsatash and configure it to centralize server logs from clients with filebeat, then filter and transform the Syslog data and move it into the stash (Elasticsearch).
                    <div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px; border-right:2px solid #4f4f4f"><div style="margin:0; padding:0; word-break:normal; text-align:right; color:#aaa; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="line-height:130%">1</div><div style="line-height:130%">2</div><div style="line-height:130%">3</div><div style="line-height:130%">4</div><div style="line-height:130%">5</div><div style="line-height:130%">6</div><div style="line-height:130%">7</div><div style="line-height:130%">8</div><div style="line-height:130%">9</div><div style="line-height:130%">10</div><div style="line-height:130%">11</div><div style="line-height:130%">12</div><div style="line-height:130%">13</div><div style="line-height:130%">14</div><div style="line-height:130%">15</div><div style="line-height:130%">16</div><div style="line-height:130%">17</div><div style="line-height:130%">18</div><div style="line-height:130%">19</div><div style="line-height:130%">20</div><div style="line-height:130%">21</div><div style="line-height:130%">22</div><div style="line-height:130%">23</div><div style="line-height:130%">24</div><div style="line-height:130%">25</div><div style="line-height:130%">26</div><div style="line-height:130%">27</div><div style="line-height:130%">28</div><div style="line-height:130%">29</div><div style="line-height:130%">30</div><div style="line-height:130%">31</div><div style="line-height:130%">32</div><div style="line-height:130%">33</div><div style="line-height:130%">34</div><div style="line-height:130%">35</div><div style="line-height:130%">36</div><div style="line-height:130%">37</div><div style="line-height:130%">38</div><div style="line-height:130%">39</div><div style="line-height:130%">40</div><div style="line-height:130%">41</div><div style="line-height:130%">42</div><div style="line-height:130%">43</div><div style="line-height:130%">44</div><div style="line-height:130%">45</div><div style="line-height:130%">46</div><div style="line-height:130%">47</div><div style="line-height:130%">48</div><div style="line-height:130%">49</div><div style="line-height:130%">50</div><div style="line-height:130%">51</div><div style="line-height:130%">52</div><div style="line-height:130%">53</div><div style="line-height:130%">54</div><div style="line-height:130%">55</div><div style="line-height:130%">56</div><div style="line-height:130%">57</div><div style="line-height:130%">58</div><div style="line-height:130%">59</div><div style="line-height:130%">60</div><div style="line-height:130%">61</div><div style="line-height:130%">62</div><div style="line-height:130%">63</div><div style="line-height:130%">64</div><div style="line-height:130%">65</div><div style="line-height:130%">66</div><div style="line-height:130%">67</div><div style="line-height:130%">68</div><div style="line-height:130%">69</div><div style="line-height:130%">70</div><div style="line-height:130%">71</div><div style="line-height:130%">72</div><div style="line-height:130%">73</div><div style="line-height:130%">74</div><div style="line-height:130%">75</div><div style="line-height:130%">76</div><div style="line-height:130%">77</div></div></td><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Master</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Download&nbsp;Logstash&nbsp;and&nbsp;install&nbsp;it&nbsp;with&nbsp;rpm.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">wget&nbsp;https:<span style="color:#0086b3"></span><span style="color:#ff3399">/</span><span style="color:#0086b3"></span><span style="color:#ff3399">/</span>artifacts.elastic.co<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>downloads<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>logstash<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>logstash<span style="color:#0086b3"></span><span style="color:#ff3399">-</span><span style="color:#c10aff">5.</span><span style="color:#c10aff">1.</span><span style="color:#c10aff">1.</span>rpm</div><div style="padding:0 6px; white-space:pre; line-height:130%">rpm&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">-</span>ivh&nbsp;logstash<span style="color:#0086b3"></span><span style="color:#ff3399">-</span><span style="color:#c10aff">5.</span><span style="color:#c10aff">1.</span><span style="color:#c10aff">1.</span>rpm</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Generate&nbsp;a&nbsp;new&nbsp;SSL&nbsp;certificate&nbsp;file&nbsp;so&nbsp;that&nbsp;the&nbsp;client&nbsp;can&nbsp;identify&nbsp;the&nbsp;elastic&nbsp;server.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Go&nbsp;to&nbsp;the&nbsp;tls&nbsp;directory&nbsp;and&nbsp;edit&nbsp;the&nbsp;openssl.cnf&nbsp;file.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">cd&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>etc<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>pki<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>tls</div><div style="padding:0 6px; white-space:pre; line-height:130%">vim&nbsp;openssl.cnf</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Add&nbsp;a&nbsp;new&nbsp;line&nbsp;in&nbsp;the&nbsp;'[&nbsp;v3_ca&nbsp;]'&nbsp;section&nbsp;for&nbsp;the&nbsp;server&nbsp;identification.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">[&nbsp;v3_ca&nbsp;]</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#&nbsp;Server&nbsp;IP&nbsp;Address</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">subjectAltName&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;IP:&nbsp;<span style="color:#c10aff">10.</span><span style="color:#c10aff">0.</span><span style="color:#c10aff">15.</span><span style="color:#c10aff">10</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Save&nbsp;and&nbsp;exit.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Generate&nbsp;the&nbsp;certificate&nbsp;file&nbsp;with&nbsp;the&nbsp;openssl&nbsp;command.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#The&nbsp;certificate&nbsp;files&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;'/etc/pki/tls/certs/'&nbsp;and&nbsp;'/etc/pki/tls/private/'&nbsp;directories.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">openssl&nbsp;req&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">-</span>config&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>etc<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>pki<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>tls<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>openssl.cnf&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">-</span>x509&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">-</span>days&nbsp;<span style="color:#c10aff">3650</span>&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">-</span>batch&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">-</span>nodes&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">-</span>newkey&nbsp;rsa:<span style="color:#c10aff">2048</span>&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">-</span>keyout&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>etc<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>pki<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>tls<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>private<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>logstash<span style="color:#0086b3"></span><span style="color:#ff3399">-</span>forwarder.key&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">-</span>out&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>etc<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>pki<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>tls<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>certs<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>logstash<span style="color:#0086b3"></span><span style="color:#ff3399">-</span>forwarder.crt</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Next,&nbsp;we&nbsp;will&nbsp;create&nbsp;new&nbsp;configuration&nbsp;files&nbsp;for&nbsp;Logstash.&nbsp;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#We&nbsp;will&nbsp;create&nbsp;a&nbsp;new&nbsp;'filebeat-input.conf'&nbsp;file&nbsp;to&nbsp;configure&nbsp;the&nbsp;log&nbsp;sources&nbsp;for&nbsp;filebeat,&nbsp;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#then&nbsp;a&nbsp;'syslog-filter.conf'&nbsp;file&nbsp;for&nbsp;syslog&nbsp;processing&nbsp;and&nbsp;the&nbsp;'output-elasticsearch.conf'&nbsp;file&nbsp;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#to&nbsp;define&nbsp;the&nbsp;Elasticsearch&nbsp;output.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Go&nbsp;to&nbsp;the&nbsp;logstash&nbsp;configuration&nbsp;directory&nbsp;and&nbsp;create&nbsp;the&nbsp;new&nbsp;configuration&nbsp;files&nbsp;in&nbsp;the&nbsp;'conf.d'&nbsp;subdirectory.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">cd&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>etc<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>logstash<span style="color:#0086b3"></span><span style="color:#ff3399">/</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">vim&nbsp;conf.d<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>filebeat<span style="color:#0086b3"></span><span style="color:#ff3399">-</span>input.conf</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Input&nbsp;configuration:&nbsp;paste&nbsp;the&nbsp;configuration&nbsp;below.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">input&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;beats&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;port&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span><span style="color:#0086b3"></span><span style="color:#ff3399">&gt;</span>&nbsp;<span style="color:#c10aff">5443</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;ssl&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span><span style="color:#0086b3"></span><span style="color:#ff3399">&gt;</span>&nbsp;<span style="color:#c10aff">true</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;ssl_certificate&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span><span style="color:#0086b3"></span><span style="color:#ff3399">&gt;</span>&nbsp;<span style="color:#ffd500">"/etc/pki/tls/certs/logstash-forwarder.crt"</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;ssl_key&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span><span style="color:#0086b3"></span><span style="color:#ff3399">&gt;</span>&nbsp;<span style="color:#ffd500">"/etc/pki/tls/private/logstash-forwarder.key"</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;}</div><div style="padding:0 6px; white-space:pre; line-height:130%">}</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Save&nbsp;and&nbsp;exit.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Create&nbsp;the&nbsp;syslog-filter.conf&nbsp;file.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">vim&nbsp;conf.d<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>syslog<span style="color:#0086b3"></span><span style="color:#ff3399">-</span>filter.conf</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Paste&nbsp;the&nbsp;configuration&nbsp;below.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">filter&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#ff3399">if</span>&nbsp;[type]&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span><span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;<span style="color:#ffd500">"syslog"</span>&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;grok&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;match&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span><span style="color:#0086b3"></span><span style="color:#ff3399">&gt;</span>&nbsp;{&nbsp;<span style="color:#ffd500">"message"</span>&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span><span style="color:#0086b3"></span><span style="color:#ff3399">&gt;</span>&nbsp;<span style="color:#ffd500">"%{SYSLOGTIMESTAMP:syslog_timestamp}&nbsp;%{SYSLOGHOST:syslog_hostname}&nbsp;%{DATA:syslog_program}(?:\[%{POSINT:syslog_pid}\])?:&nbsp;%{GREEDYDATA:syslog_message}"</span>&nbsp;}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;add_field&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span><span style="color:#0086b3"></span><span style="color:#ff3399">&gt;</span>&nbsp;[&nbsp;<span style="color:#ffd500">"received_at"</span>,&nbsp;<span style="color:#ffd500">"%{@timestamp}"</span>&nbsp;]</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;add_field&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span><span style="color:#0086b3"></span><span style="color:#ff3399">&gt;</span>&nbsp;[&nbsp;<span style="color:#ffd500">"received_from"</span>,&nbsp;<span style="color:#ffd500">"%{host}"</span>&nbsp;]</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;date&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;match&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span><span style="color:#0086b3"></span><span style="color:#ff3399">&gt;</span>&nbsp;[&nbsp;<span style="color:#ffd500">"syslog_timestamp"</span>,&nbsp;<span style="color:#ffd500">"MMM&nbsp;&nbsp;d&nbsp;HH:mm:ss"</span>,&nbsp;<span style="color:#ffd500">"MMM&nbsp;dd&nbsp;HH:mm:ss"</span>&nbsp;]</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;}</div><div style="padding:0 6px; white-space:pre; line-height:130%">}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#We&nbsp;use&nbsp;a&nbsp;filter&nbsp;plugin&nbsp;named&nbsp;'grok'&nbsp;to&nbsp;parse&nbsp;the&nbsp;syslog&nbsp;files.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Save&nbsp;and&nbsp;exit.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Create&nbsp;the&nbsp;output&nbsp;configuration&nbsp;file&nbsp;'output-elasticsearch.conf'.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">vim&nbsp;conf.d<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>output<span style="color:#0086b3"></span><span style="color:#ff3399">-</span>elasticsearch.conf</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Paste&nbsp;the&nbsp;configuration&nbsp;below.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">output&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;elasticsearch&nbsp;{&nbsp;hosts&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span><span style="color:#0086b3"></span><span style="color:#ff3399">&gt;</span>&nbsp;[<span style="color:#ffd500">"localhost:9200"</span>]</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;hosts&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span><span style="color:#0086b3"></span><span style="color:#ff3399">&gt;</span>&nbsp;<span style="color:#ffd500">"localhost:9200"</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;manage_template&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span><span style="color:#0086b3"></span><span style="color:#ff3399">&gt;</span>&nbsp;<span style="color:#c10aff">false</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;index&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span><span style="color:#0086b3"></span><span style="color:#ff3399">&gt;</span>&nbsp;<span style="color:#ffd500">"%{[@metadata][beat]}-%{+YYYY.MM.dd}"</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;document_type&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span><span style="color:#0086b3"></span><span style="color:#ff3399">&gt;</span>&nbsp;<span style="color:#ffd500">"%{[@metadata][type]}"</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;}</div><div style="padding:0 6px; white-space:pre; line-height:130%">}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Save&nbsp;and&nbsp;exit.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Finally&nbsp;add&nbsp;logstash&nbsp;to&nbsp;start&nbsp;at&nbsp;boot&nbsp;time&nbsp;and&nbsp;start&nbsp;the&nbsp;service.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">sudo&nbsp;systemctl&nbsp;enable&nbsp;logstash</div><div style="padding:0 6px; white-space:pre; line-height:130%">sudo&nbsp;systemctl&nbsp;start&nbsp;logstash</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div></div><div style="text-align:right; margin-top:-13px; margin-right:5px; font-size:9px; font-style:italic"><a href="http://colorscripter.com/info#e" target="_blank" style="color:#4f4f4f; text-decoration:none">Colored by Color Scripter</a></div></td><td style="vertical-align:bottom; padding:0 2px 4px 0"><a href="http://colorscripter.com/info#e" target="_blank" style="text-decoration:none; color:white"><span style="font-size:9px; word-break:normal; background-color:#4f4f4f; color:white; border-radius:10px; padding:1px">cs</span></a></td></tr></table></div>
                    <span class="image main"><img src="<c:url value="/resource/images/bigdata/big_03_08_elastic.png"/>" alt="" /></span>
                    </p>
                    <hr>



                    <!--Install Logstash-->
                    <p>
                    <h2>Step5. Install and Configure Logstash(Master Node)</h2>
                    In this step, we will install Logsatash and configure it to centralize server logs from clients with filebeat, then filter and transform the Syslog data and move it into the stash (Elasticsearch).
                    <div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px; border-right:2px solid #4f4f4f"><div style="margin:0; padding:0; word-break:normal; text-align:right; color:#aaa; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="line-height:130%">1</div><div style="line-height:130%">2</div><div style="line-height:130%">3</div><div style="line-height:130%">4</div><div style="line-height:130%">5</div><div style="line-height:130%">6</div><div style="line-height:130%">7</div><div style="line-height:130%">8</div><div style="line-height:130%">9</div><div style="line-height:130%">10</div><div style="line-height:130%">11</div><div style="line-height:130%">12</div><div style="line-height:130%">13</div><div style="line-height:130%">14</div><div style="line-height:130%">15</div><div style="line-height:130%">16</div><div style="line-height:130%">17</div><div style="line-height:130%">18</div><div style="line-height:130%">19</div><div style="line-height:130%">20</div><div style="line-height:130%">21</div><div style="line-height:130%">22</div><div style="line-height:130%">23</div><div style="line-height:130%">24</div><div style="line-height:130%">25</div><div style="line-height:130%">26</div><div style="line-height:130%">27</div><div style="line-height:130%">28</div><div style="line-height:130%">29</div><div style="line-height:130%">30</div><div style="line-height:130%">31</div><div style="line-height:130%">32</div><div style="line-height:130%">33</div><div style="line-height:130%">34</div><div style="line-height:130%">35</div><div style="line-height:130%">36</div><div style="line-height:130%">37</div><div style="line-height:130%">38</div><div style="line-height:130%">39</div><div style="line-height:130%">40</div><div style="line-height:130%">41</div><div style="line-height:130%">42</div><div style="line-height:130%">43</div><div style="line-height:130%">44</div><div style="line-height:130%">45</div><div style="line-height:130%">46</div><div style="line-height:130%">47</div><div style="line-height:130%">48</div><div style="line-height:130%">49</div><div style="line-height:130%">50</div><div style="line-height:130%">51</div><div style="line-height:130%">52</div><div style="line-height:130%">53</div><div style="line-height:130%">54</div><div style="line-height:130%">55</div><div style="line-height:130%">56</div><div style="line-height:130%">57</div><div style="line-height:130%">58</div><div style="line-height:130%">59</div><div style="line-height:130%">60</div><div style="line-height:130%">61</div><div style="line-height:130%">62</div><div style="line-height:130%">63</div><div style="line-height:130%">64</div><div style="line-height:130%">65</div><div style="line-height:130%">66</div><div style="line-height:130%">67</div><div style="line-height:130%">68</div><div style="line-height:130%">69</div><div style="line-height:130%">70</div><div style="line-height:130%">71</div><div style="line-height:130%">72</div><div style="line-height:130%">73</div><div style="line-height:130%">74</div><div style="line-height:130%">75</div><div style="line-height:130%">76</div><div style="line-height:130%">77</div></div></td><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Master</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Download&nbsp;Logstash&nbsp;and&nbsp;install&nbsp;it&nbsp;with&nbsp;rpm.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">wget&nbsp;https:<span style="color:#0086b3"></span><span style="color:#ff3399">/</span><span style="color:#0086b3"></span><span style="color:#ff3399">/</span>artifacts.elastic.co<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>downloads<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>logstash<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>logstash<span style="color:#0086b3"></span><span style="color:#ff3399">-</span><span style="color:#c10aff">5.</span><span style="color:#c10aff">1.</span><span style="color:#c10aff">1.</span>rpm</div><div style="padding:0 6px; white-space:pre; line-height:130%">rpm&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">-</span>ivh&nbsp;logstash<span style="color:#0086b3"></span><span style="color:#ff3399">-</span><span style="color:#c10aff">5.</span><span style="color:#c10aff">1.</span><span style="color:#c10aff">1.</span>rpm</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Generate&nbsp;a&nbsp;new&nbsp;SSL&nbsp;certificate&nbsp;file&nbsp;so&nbsp;that&nbsp;the&nbsp;client&nbsp;can&nbsp;identify&nbsp;the&nbsp;elastic&nbsp;server.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Go&nbsp;to&nbsp;the&nbsp;tls&nbsp;directory&nbsp;and&nbsp;edit&nbsp;the&nbsp;openssl.cnf&nbsp;file.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">cd&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>etc<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>pki<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>tls</div><div style="padding:0 6px; white-space:pre; line-height:130%">vim&nbsp;openssl.cnf</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Add&nbsp;a&nbsp;new&nbsp;line&nbsp;in&nbsp;the&nbsp;'[&nbsp;v3_ca&nbsp;]'&nbsp;section&nbsp;for&nbsp;the&nbsp;server&nbsp;identification.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">[&nbsp;v3_ca&nbsp;]</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#&nbsp;Server&nbsp;IP&nbsp;Address</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">subjectAltName&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;IP:&nbsp;<span style="color:#c10aff">10.</span><span style="color:#c10aff">0.</span><span style="color:#c10aff">15.</span><span style="color:#c10aff">10</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Save&nbsp;and&nbsp;exit.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Generate&nbsp;the&nbsp;certificate&nbsp;file&nbsp;with&nbsp;the&nbsp;openssl&nbsp;command.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#The&nbsp;certificate&nbsp;files&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;'/etc/pki/tls/certs/'&nbsp;and&nbsp;'/etc/pki/tls/private/'&nbsp;directories.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">openssl&nbsp;req&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">-</span>config&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>etc<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>pki<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>tls<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>openssl.cnf&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">-</span>x509&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">-</span>days&nbsp;<span style="color:#c10aff">3650</span>&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">-</span>batch&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">-</span>nodes&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">-</span>newkey&nbsp;rsa:<span style="color:#c10aff">2048</span>&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">-</span>keyout&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>etc<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>pki<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>tls<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>private<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>logstash<span style="color:#0086b3"></span><span style="color:#ff3399">-</span>forwarder.key&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">-</span>out&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>etc<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>pki<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>tls<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>certs<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>logstash<span style="color:#0086b3"></span><span style="color:#ff3399">-</span>forwarder.crt</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Next,&nbsp;we&nbsp;will&nbsp;create&nbsp;new&nbsp;configuration&nbsp;files&nbsp;for&nbsp;Logstash.&nbsp;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#We&nbsp;will&nbsp;create&nbsp;a&nbsp;new&nbsp;'filebeat-input.conf'&nbsp;file&nbsp;to&nbsp;configure&nbsp;the&nbsp;log&nbsp;sources&nbsp;for&nbsp;filebeat,&nbsp;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#then&nbsp;a&nbsp;'syslog-filter.conf'&nbsp;file&nbsp;for&nbsp;syslog&nbsp;processing&nbsp;and&nbsp;the&nbsp;'output-elasticsearch.conf'&nbsp;file&nbsp;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#to&nbsp;define&nbsp;the&nbsp;Elasticsearch&nbsp;output.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Go&nbsp;to&nbsp;the&nbsp;logstash&nbsp;configuration&nbsp;directory&nbsp;and&nbsp;create&nbsp;the&nbsp;new&nbsp;configuration&nbsp;files&nbsp;in&nbsp;the&nbsp;'conf.d'&nbsp;subdirectory.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">cd&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>etc<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>logstash<span style="color:#0086b3"></span><span style="color:#ff3399">/</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">vim&nbsp;conf.d<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>filebeat<span style="color:#0086b3"></span><span style="color:#ff3399">-</span>input.conf</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Input&nbsp;configuration:&nbsp;paste&nbsp;the&nbsp;configuration&nbsp;below.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">input&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;beats&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;port&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span><span style="color:#0086b3"></span><span style="color:#ff3399">&gt;</span>&nbsp;<span style="color:#c10aff">5443</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;ssl&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span><span style="color:#0086b3"></span><span style="color:#ff3399">&gt;</span>&nbsp;<span style="color:#c10aff">true</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;ssl_certificate&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span><span style="color:#0086b3"></span><span style="color:#ff3399">&gt;</span>&nbsp;<span style="color:#ffd500">"/etc/pki/tls/certs/logstash-forwarder.crt"</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;ssl_key&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span><span style="color:#0086b3"></span><span style="color:#ff3399">&gt;</span>&nbsp;<span style="color:#ffd500">"/etc/pki/tls/private/logstash-forwarder.key"</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;}</div><div style="padding:0 6px; white-space:pre; line-height:130%">}</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Save&nbsp;and&nbsp;exit.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Create&nbsp;the&nbsp;syslog-filter.conf&nbsp;file.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">vim&nbsp;conf.d<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>syslog<span style="color:#0086b3"></span><span style="color:#ff3399">-</span>filter.conf</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Paste&nbsp;the&nbsp;configuration&nbsp;below.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">filter&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#ff3399">if</span>&nbsp;[type]&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span><span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;<span style="color:#ffd500">"syslog"</span>&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;grok&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;match&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span><span style="color:#0086b3"></span><span style="color:#ff3399">&gt;</span>&nbsp;{&nbsp;<span style="color:#ffd500">"message"</span>&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span><span style="color:#0086b3"></span><span style="color:#ff3399">&gt;</span>&nbsp;<span style="color:#ffd500">"%{SYSLOGTIMESTAMP:syslog_timestamp}&nbsp;%{SYSLOGHOST:syslog_hostname}&nbsp;%{DATA:syslog_program}(?:\[%{POSINT:syslog_pid}\])?:&nbsp;%{GREEDYDATA:syslog_message}"</span>&nbsp;}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;add_field&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span><span style="color:#0086b3"></span><span style="color:#ff3399">&gt;</span>&nbsp;[&nbsp;<span style="color:#ffd500">"received_at"</span>,&nbsp;<span style="color:#ffd500">"%{@timestamp}"</span>&nbsp;]</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;add_field&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span><span style="color:#0086b3"></span><span style="color:#ff3399">&gt;</span>&nbsp;[&nbsp;<span style="color:#ffd500">"received_from"</span>,&nbsp;<span style="color:#ffd500">"%{host}"</span>&nbsp;]</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;date&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;match&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span><span style="color:#0086b3"></span><span style="color:#ff3399">&gt;</span>&nbsp;[&nbsp;<span style="color:#ffd500">"syslog_timestamp"</span>,&nbsp;<span style="color:#ffd500">"MMM&nbsp;&nbsp;d&nbsp;HH:mm:ss"</span>,&nbsp;<span style="color:#ffd500">"MMM&nbsp;dd&nbsp;HH:mm:ss"</span>&nbsp;]</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;}</div><div style="padding:0 6px; white-space:pre; line-height:130%">}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#We&nbsp;use&nbsp;a&nbsp;filter&nbsp;plugin&nbsp;named&nbsp;'grok'&nbsp;to&nbsp;parse&nbsp;the&nbsp;syslog&nbsp;files.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Save&nbsp;and&nbsp;exit.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Create&nbsp;the&nbsp;output&nbsp;configuration&nbsp;file&nbsp;'output-elasticsearch.conf'.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">vim&nbsp;conf.d<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>output<span style="color:#0086b3"></span><span style="color:#ff3399">-</span>elasticsearch.conf</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Paste&nbsp;the&nbsp;configuration&nbsp;below.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">output&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;elasticsearch&nbsp;{&nbsp;hosts&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span><span style="color:#0086b3"></span><span style="color:#ff3399">&gt;</span>&nbsp;[<span style="color:#ffd500">"localhost:9200"</span>]</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;hosts&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span><span style="color:#0086b3"></span><span style="color:#ff3399">&gt;</span>&nbsp;<span style="color:#ffd500">"localhost:9200"</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;manage_template&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span><span style="color:#0086b3"></span><span style="color:#ff3399">&gt;</span>&nbsp;<span style="color:#c10aff">false</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;index&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span><span style="color:#0086b3"></span><span style="color:#ff3399">&gt;</span>&nbsp;<span style="color:#ffd500">"%{[@metadata][beat]}-%{+YYYY.MM.dd}"</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;document_type&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span><span style="color:#0086b3"></span><span style="color:#ff3399">&gt;</span>&nbsp;<span style="color:#ffd500">"%{[@metadata][type]}"</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;}</div><div style="padding:0 6px; white-space:pre; line-height:130%">}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Save&nbsp;and&nbsp;exit.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Finally&nbsp;add&nbsp;logstash&nbsp;to&nbsp;start&nbsp;at&nbsp;boot&nbsp;time&nbsp;and&nbsp;start&nbsp;the&nbsp;service.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">sudo&nbsp;systemctl&nbsp;enable&nbsp;logstash</div><div style="padding:0 6px; white-space:pre; line-height:130%">sudo&nbsp;systemctl&nbsp;start&nbsp;logstash</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div></div><div style="text-align:right; margin-top:-13px; margin-right:5px; font-size:9px; font-style:italic"><a href="http://colorscripter.com/info#e" target="_blank" style="color:#4f4f4f; text-decoration:none">Colored by Color Scripter</a></div></td><td style="vertical-align:bottom; padding:0 2px 4px 0"><a href="http://colorscripter.com/info#e" target="_blank" style="text-decoration:none; color:white"><span style="font-size:9px; word-break:normal; background-color:#4f4f4f; color:white; border-radius:10px; padding:1px">cs</span></a></td></tr></table></div>
                    <span class="image main"><img src="<c:url value="/resource/images/bigdata/big_03_08_elastic.png"/>" alt="" /></span>

                    If you want to configure filebeat and logstash in the same node, you have to configure below code.
                    <div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px; border-right:2px solid #4f4f4f"><div style="margin:0; padding:0; word-break:normal; text-align:right; color:#aaa; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="line-height:130%">1</div><div style="line-height:130%">2</div><div style="line-height:130%">3</div><div style="line-height:130%">4</div><div style="line-height:130%">5</div><div style="line-height:130%">6</div><div style="line-height:130%">7</div><div style="line-height:130%">8</div><div style="line-height:130%">9</div><div style="line-height:130%">10</div><div style="line-height:130%">11</div><div style="line-height:130%">12</div><div style="line-height:130%">13</div><div style="line-height:130%">14</div><div style="line-height:130%">15</div><div style="line-height:130%">16</div><div style="line-height:130%">17</div><div style="line-height:130%">18</div><div style="line-height:130%">19</div><div style="line-height:130%">20</div><div style="line-height:130%">21</div><div style="line-height:130%">22</div><div style="line-height:130%">23</div><div style="line-height:130%">24</div><div style="line-height:130%">25</div><div style="line-height:130%">26</div><div style="line-height:130%">27</div><div style="line-height:130%">28</div><div style="line-height:130%">29</div><div style="line-height:130%">30</div><div style="line-height:130%">31</div><div style="line-height:130%">32</div><div style="line-height:130%">33</div><div style="line-height:130%">34</div><div style="line-height:130%">35</div><div style="line-height:130%">36</div><div style="line-height:130%">37</div><div style="line-height:130%">38</div><div style="line-height:130%">39</div><div style="line-height:130%">40</div><div style="line-height:130%">41</div><div style="line-height:130%">42</div><div style="line-height:130%">43</div><div style="line-height:130%">44</div><div style="line-height:130%">45</div><div style="line-height:130%">46</div><div style="line-height:130%">47</div><div style="line-height:130%">48</div><div style="line-height:130%">49</div><div style="line-height:130%">50</div><div style="line-height:130%">51</div><div style="line-height:130%">52</div><div style="line-height:130%">53</div></div></td><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Master</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Download&nbsp;Logstash&nbsp;and&nbsp;install&nbsp;it&nbsp;with&nbsp;rpm.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">wget&nbsp;https:<span style="color:#0086b3"></span><span style="color:#ff3399">/</span><span style="color:#0086b3"></span><span style="color:#ff3399">/</span>artifacts.elastic.co<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>downloads<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>logstash<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>logstash<span style="color:#0086b3"></span><span style="color:#ff3399">-</span><span style="color:#c10aff">5.</span><span style="color:#c10aff">1.</span><span style="color:#c10aff">1.</span>rpm</div><div style="padding:0 6px; white-space:pre; line-height:130%">rpm&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">-</span>ivh&nbsp;logstash<span style="color:#0086b3"></span><span style="color:#ff3399">-</span><span style="color:#c10aff">5.</span><span style="color:#c10aff">1.</span><span style="color:#c10aff">1.</span>rpm</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Go&nbsp;to&nbsp;the&nbsp;logstash&nbsp;configuration&nbsp;directory&nbsp;and&nbsp;create&nbsp;the&nbsp;new&nbsp;configuration&nbsp;files&nbsp;in&nbsp;the&nbsp;'conf.d'&nbsp;subdirectory.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">cd&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>etc<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>logstash<span style="color:#0086b3"></span><span style="color:#ff3399">/</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">vim&nbsp;conf.d<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>filebeat<span style="color:#0086b3"></span><span style="color:#ff3399">-</span>input.conf</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Input&nbsp;configuration:&nbsp;paste&nbsp;the&nbsp;configuration&nbsp;below.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">input&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;beats&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;port&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span><span style="color:#0086b3"></span><span style="color:#ff3399">&gt;</span>&nbsp;<span style="color:#c10aff">5443</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;}</div><div style="padding:0 6px; white-space:pre; line-height:130%">}</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Save&nbsp;and&nbsp;exit.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Create&nbsp;the&nbsp;syslog-filter.conf&nbsp;file.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">vim&nbsp;conf.d<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>syslog<span style="color:#0086b3"></span><span style="color:#ff3399">-</span>filter.conf</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Paste&nbsp;the&nbsp;configuration&nbsp;below.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">filter&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#ff3399">if</span>&nbsp;[type]&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span><span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;<span style="color:#ffd500">"syslog"</span>&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;grok&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;match&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span><span style="color:#0086b3"></span><span style="color:#ff3399">&gt;</span>&nbsp;{&nbsp;<span style="color:#ffd500">"message"</span>&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span><span style="color:#0086b3"></span><span style="color:#ff3399">&gt;</span>&nbsp;<span style="color:#ffd500">"%{SYSLOGTIMESTAMP:syslog_timestamp}&nbsp;%{SYSLOGHOST:syslog_hostname}&nbsp;%{DATA:syslog_program}(?:\[%{POSINT:syslog_pid}\])?:&nbsp;%{GREEDYDATA:syslog_message}"</span>&nbsp;}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;add_field&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span><span style="color:#0086b3"></span><span style="color:#ff3399">&gt;</span>&nbsp;[&nbsp;<span style="color:#ffd500">"received_at"</span>,&nbsp;<span style="color:#ffd500">"%{@timestamp}"</span>&nbsp;]</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;add_field&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span><span style="color:#0086b3"></span><span style="color:#ff3399">&gt;</span>&nbsp;[&nbsp;<span style="color:#ffd500">"received_from"</span>,&nbsp;<span style="color:#ffd500">"%{host}"</span>&nbsp;]</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;date&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;match&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span><span style="color:#0086b3"></span><span style="color:#ff3399">&gt;</span>&nbsp;[&nbsp;<span style="color:#ffd500">"syslog_timestamp"</span>,&nbsp;<span style="color:#ffd500">"MMM&nbsp;&nbsp;d&nbsp;HH:mm:ss"</span>,&nbsp;<span style="color:#ffd500">"MMM&nbsp;dd&nbsp;HH:mm:ss"</span>&nbsp;]</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;}</div><div style="padding:0 6px; white-space:pre; line-height:130%">}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#We&nbsp;use&nbsp;a&nbsp;filter&nbsp;plugin&nbsp;named&nbsp;'grok'&nbsp;to&nbsp;parse&nbsp;the&nbsp;syslog&nbsp;files.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Save&nbsp;and&nbsp;exit.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Create&nbsp;the&nbsp;output&nbsp;configuration&nbsp;file&nbsp;'output-elasticsearch.conf'.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">vim&nbsp;conf.d<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>output<span style="color:#0086b3"></span><span style="color:#ff3399">-</span>elasticsearch.conf</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Paste&nbsp;the&nbsp;configuration&nbsp;below.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">output&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;elasticsearch&nbsp;{&nbsp;hosts&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span><span style="color:#0086b3"></span><span style="color:#ff3399">&gt;</span>&nbsp;[<span style="color:#ffd500">"localhost:9200"</span>]</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;hosts&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span><span style="color:#0086b3"></span><span style="color:#ff3399">&gt;</span>&nbsp;<span style="color:#ffd500">"localhost:9200"</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;manage_template&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span><span style="color:#0086b3"></span><span style="color:#ff3399">&gt;</span>&nbsp;<span style="color:#c10aff">false</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;index&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span><span style="color:#0086b3"></span><span style="color:#ff3399">&gt;</span>&nbsp;<span style="color:#ffd500">"%{[@metadata][beat]}-%{+YYYY.MM.dd}"</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;document_type&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span><span style="color:#0086b3"></span><span style="color:#ff3399">&gt;</span>&nbsp;<span style="color:#ffd500">"%{[@metadata][type]}"</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;}</div><div style="padding:0 6px; white-space:pre; line-height:130%">}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Save&nbsp;and&nbsp;exit.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Finally&nbsp;add&nbsp;logstash&nbsp;to&nbsp;start&nbsp;at&nbsp;boot&nbsp;time&nbsp;and&nbsp;start&nbsp;the&nbsp;service.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">sudo&nbsp;systemctl&nbsp;enable&nbsp;logstash</div><div style="padding:0 6px; white-space:pre; line-height:130%">sudo&nbsp;systemctl&nbsp;start&nbsp;logstash</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div></div><div style="text-align:right; margin-top:-13px; margin-right:5px; font-size:9px; font-style:italic"><a href="http://colorscripter.com/info#e" target="_blank" style="color:#4f4f4f; text-decoration:none">Colored by Color Scripter</a></div></td><td style="vertical-align:bottom; padding:0 2px 4px 0"><a href="http://colorscripter.com/info#e" target="_blank" style="text-decoration:none; color:white"><span style="font-size:9px; word-break:normal; background-color:#4f4f4f; color:white; border-radius:10px; padding:1px">cs</span></a></td></tr></table></div>
                    </p>
                    <hr>



                    <!--Install Filebeat-->
                    <p>
                    <h2>Step 6 - Install and Configure Filebeat on the CentOS Client</h2>
                    Beats are data shippers, lightweight agents that can be installed on the client nodes to send huge amounts of data from the client machine to the Logstash or Elasticsearch server. There are 4 beats available, 'Filebeat' for 'Log Files', 'Metricbeat' for 'Metrics', 'Packetbeat' for 'Network Data' and 'Winlogbeat' for the Windows client 'Event Log'.

                    In this tutorial, I will show you how to install and configure 'Filebeat' to transfer data log files to the Logstash server over an SSL connection.
                    <div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px; border-right:2px solid #4f4f4f"><div style="margin:0; padding:0; word-break:normal; text-align:right; color:#aaa; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="line-height:130%">1</div><div style="line-height:130%">2</div><div style="line-height:130%">3</div><div style="line-height:130%">4</div><div style="line-height:130%">5</div><div style="line-height:130%">6</div><div style="line-height:130%">7</div><div style="line-height:130%">8</div><div style="line-height:130%">9</div><div style="line-height:130%">10</div><div style="line-height:130%">11</div><div style="line-height:130%">12</div><div style="line-height:130%">13</div><div style="line-height:130%">14</div><div style="line-height:130%">15</div><div style="line-height:130%">16</div><div style="line-height:130%">17</div><div style="line-height:130%">18</div><div style="line-height:130%">19</div><div style="line-height:130%">20</div><div style="line-height:130%">21</div><div style="line-height:130%">22</div><div style="line-height:130%">23</div><div style="line-height:130%">24</div><div style="line-height:130%">25</div><div style="line-height:130%">26</div><div style="line-height:130%">27</div><div style="line-height:130%">28</div><div style="line-height:130%">29</div><div style="line-height:130%">30</div><div style="line-height:130%">31</div><div style="line-height:130%">32</div><div style="line-height:130%">33</div><div style="line-height:130%">34</div><div style="line-height:130%">35</div><div style="line-height:130%">36</div><div style="line-height:130%">37</div><div style="line-height:130%">38</div><div style="line-height:130%">39</div><div style="line-height:130%">40</div><div style="line-height:130%">41</div><div style="line-height:130%">42</div><div style="line-height:130%">43</div><div style="line-height:130%">44</div><div style="line-height:130%">45</div><div style="line-height:130%">46</div><div style="line-height:130%">47</div><div style="line-height:130%">48</div><div style="line-height:130%">49</div><div style="line-height:130%">50</div></div></td><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Login&nbsp;to&nbsp;the&nbsp;client1&nbsp;server.&nbsp;Then&nbsp;copy&nbsp;the&nbsp;certificate&nbsp;file&nbsp;from&nbsp;the&nbsp;elastic&nbsp;server&nbsp;to&nbsp;the&nbsp;client1&nbsp;server.&nbsp;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">ssh&nbsp;root@client1IP</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Copy&nbsp;the&nbsp;certificate&nbsp;file&nbsp;with&nbsp;the&nbsp;scp&nbsp;command.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">scp&nbsp;root@elk<span style="color:#0086b3"></span><span style="color:#ff3399">-</span>serverIP:~<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>logstash<span style="color:#0086b3"></span><span style="color:#ff3399">-</span>forwarder.crt&nbsp;.</div><div style="padding:0 6px; white-space:pre; line-height:130%">TYPE&nbsp;elk<span style="color:#0086b3"></span><span style="color:#ff3399">-</span>server&nbsp;password</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Create&nbsp;a&nbsp;new&nbsp;directory&nbsp;and&nbsp;move&nbsp;certificate&nbsp;file&nbsp;to&nbsp;that&nbsp;directory.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">sudo&nbsp;mkdir&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">-</span>p&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>etc<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>pki<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>tls<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>certs<span style="color:#0086b3"></span><span style="color:#ff3399">/</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">mv&nbsp;~<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>logstash<span style="color:#0086b3"></span><span style="color:#ff3399">-</span>forwarder.crt&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>etc<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>pki<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>tls<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>certs<span style="color:#0086b3"></span><span style="color:#ff3399">/</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Next,&nbsp;import&nbsp;the&nbsp;elastic&nbsp;key&nbsp;on&nbsp;the&nbsp;client1&nbsp;server.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">rpm&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">-</span><span style="color:#0086b3"></span><span style="color:#ff3399">-</span>import&nbsp;https:<span style="color:#0086b3"></span><span style="color:#ff3399">/</span><span style="color:#0086b3"></span><span style="color:#ff3399">/</span>artifacts.elastic.co<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>GPG<span style="color:#0086b3"></span><span style="color:#ff3399">-</span>KEY<span style="color:#0086b3"></span><span style="color:#ff3399">-</span>elasticsearch</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Download&nbsp;Filebeat&nbsp;and&nbsp;install&nbsp;it&nbsp;with&nbsp;rpm.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">wget&nbsp;https:<span style="color:#0086b3"></span><span style="color:#ff3399">/</span><span style="color:#0086b3"></span><span style="color:#ff3399">/</span>artifacts.elastic.co<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>downloads<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>beats<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>filebeat<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>filebeat<span style="color:#0086b3"></span><span style="color:#ff3399">-</span><span style="color:#c10aff">5.</span><span style="color:#c10aff">1.</span><span style="color:#c10aff">1</span><span style="color:#ff3399">-</span>x86_64.rpm</div><div style="padding:0 6px; white-space:pre; line-height:130%">rpm&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">-</span>ivh&nbsp;filebeat<span style="color:#0086b3"></span><span style="color:#ff3399">-</span><span style="color:#c10aff">5.</span><span style="color:#c10aff">1.</span><span style="color:#c10aff">1</span><span style="color:#ff3399">-</span>x86_64.rpm</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Filebeat&nbsp;has&nbsp;been&nbsp;installed,&nbsp;go&nbsp;to&nbsp;the&nbsp;configuration&nbsp;directory&nbsp;and&nbsp;edit&nbsp;the&nbsp;file&nbsp;'filebeat.yml'.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">cd&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>etc<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>filebeat<span style="color:#0086b3"></span><span style="color:#ff3399">/</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">vim&nbsp;filebeat.yml</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#In&nbsp;the&nbsp;paths&nbsp;section&nbsp;on&nbsp;line&nbsp;21,&nbsp;add&nbsp;the&nbsp;new&nbsp;log&nbsp;files.&nbsp;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#We&nbsp;will&nbsp;add&nbsp;two&nbsp;files&nbsp;'/var/log/secure'&nbsp;for&nbsp;ssh&nbsp;activity&nbsp;and&nbsp;'/var/log/messages'&nbsp;for&nbsp;the&nbsp;server&nbsp;log.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;paths:</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">-</span>&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>var<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>log<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>secure</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">-</span>&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>var<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>log<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>messages</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Add&nbsp;a&nbsp;new&nbsp;configuration&nbsp;on&nbsp;line&nbsp;26&nbsp;to&nbsp;define&nbsp;the&nbsp;syslog&nbsp;type&nbsp;files.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">document<span style="color:#0086b3"></span><span style="color:#ff3399">-</span>type:&nbsp;syslog</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Filebeat&nbsp;is&nbsp;using&nbsp;Elasticsearch&nbsp;as&nbsp;the&nbsp;output&nbsp;target&nbsp;by&nbsp;default.&nbsp;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#In&nbsp;this&nbsp;tutorial,&nbsp;we&nbsp;will&nbsp;change&nbsp;it&nbsp;to&nbsp;Logshtash.&nbsp;Disable&nbsp;Elasticsearch&nbsp;output&nbsp;by&nbsp;adding&nbsp;comments&nbsp;on&nbsp;the&nbsp;lines&nbsp;83&nbsp;and&nbsp;85.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Disable&nbsp;elasticsearch&nbsp;output.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#--------------------------&nbsp;Elasticsearch&nbsp;output&nbsp;------------------------------</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#output.elasticsearch:</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#999999">#&nbsp;Array&nbsp;of&nbsp;hosts&nbsp;to&nbsp;connect&nbsp;to.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#&nbsp;&nbsp;hosts:&nbsp;["localhost:9200"]</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Now&nbsp;add&nbsp;the&nbsp;new&nbsp;logstash&nbsp;output&nbsp;configuration.&nbsp;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Uncomment&nbsp;the&nbsp;logstash&nbsp;output&nbsp;configuration&nbsp;and&nbsp;change&nbsp;all&nbsp;value&nbsp;to&nbsp;the&nbsp;configuration&nbsp;that&nbsp;is&nbsp;shown&nbsp;below.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">output.logstash:</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#999999">#&nbsp;The&nbsp;Logstash&nbsp;hosts</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;hosts:&nbsp;[<span style="color:#ffd500">"10.0.15.10:5443"</span>]</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;bulk_max_size:&nbsp;<span style="color:#c10aff">1024</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;ssl.certificate_authorities:&nbsp;[<span style="color:#ffd500">"/etc/pki/tls/certs/logstash-forwarder.crt"</span>]</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;template.name:&nbsp;<span style="color:#ffd500">"filebeat"</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;template.path:&nbsp;<span style="color:#ffd500">"filebeat.template.json"</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;template.overwrite:&nbsp;<span style="color:#c10aff">false</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Save&nbsp;the&nbsp;file&nbsp;and&nbsp;exit&nbsp;vim.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">#Add&nbsp;Filebeat&nbsp;to&nbsp;start&nbsp;at&nbsp;boot&nbsp;time&nbsp;and&nbsp;start&nbsp;it.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">sudo&nbsp;systemctl&nbsp;enable&nbsp;filebeat</div><div style="padding:0 6px; white-space:pre; line-height:130%">sudo&nbsp;systemctl&nbsp;start&nbsp;filebeat</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div></div><div style="text-align:right; margin-top:-13px; margin-right:5px; font-size:9px; font-style:italic"><a href="http://colorscripter.com/info#e" target="_blank" style="color:#4f4f4f; text-decoration:none">Colored by Color Scripter</a></div></td><td style="vertical-align:bottom; padding:0 2px 4px 0"><a href="http://colorscripter.com/info#e" target="_blank" style="text-decoration:none; color:white"><span style="font-size:9px; word-break:normal; background-color:#4f4f4f; color:white; border-radius:10px; padding:1px">cs</span></a></td></tr></table></div>
                    </p>
                    <hr>


                    <!--Reference-->
                    <header class="major">
                        <h1>Reference</h1>
                    </header>
                    <p>
                        https://www.howtoforge.com/tutorial/how-to-install-elastic-stack-on-centos-7/
                    </p>


                </div>
            </section>


    <c:import url="../footer.jsp"/>
</body>
</html>
